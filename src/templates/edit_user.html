{% extends "base.html" %}

{% block title %}Edit User{% endblock %}

{% block content %}
<h1 class="mt-4">Edit User</h1>
<form action="{{ url_for('edit_user', user_id=user.id) }}" method="post" enctype="multipart/form-data">
  <div class="form-group">
    <label for="usernameInput">Username</label>
    <input type="text" class="form-control" id="usernameInput" name="username" value="{{ user.username }}" required>
  </div>
  <div class="form-group">
    <label for="emailInput">Email</label>
    <input type="email" class="form-control" id="emailInput" name="email" value="{{ user.email }}" required>
  </div>
  <div class="form-group">
    <label for="householdSelect">Household</label>
    <select class="form-control" id="householdSelect" name="household_id">
      {% for household in households %}
      <option value="{{ household.id }}" {% if household.id == user.household_id %}selected{% endif %}>
        {{ household.name }}
      </option>
      {% endfor %}
    </select>
  </div>
  <div class="form-group">
    <label for="avatarInput">Avatar</label>
    <input type="file" class="form-control" id="avatarInput" name="avatar">
    {% if user.avatar %}
      <img src="{{ url_for('static', filename='avatars/' ~ user.avatar) }}" alt="Avatar" class="img-thumbnail mt-2" style="max-width: 150px;">
    {% endif %}
  </div>
  <button type="submit" class="btn btn-primary">Save Changes</button>
  <a href="{{ url_for('manage_users') }}" class="btn btn-secondary">Cancel</a>
</form>
{% endblock %}
